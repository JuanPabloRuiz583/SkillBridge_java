<!-- html -->
<html lang="pt-BR" data-theme="light" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title th:text="#{candidatura.page.title}">SkillBridge - Candidaturas</title>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
<div class="container mx-auto max-w-5xl p-4">
  <!-- CabeÃ§alho -->
  <div class="bg-gradient-to-r from-blue-700 to-blue-500 rounded-2xl p-8 mb-8 shadow text-white text-center">
    <h1 class="text-4xl font-bold mb-2">SkillBridge</h1>
    <p class="opacity-90">Conectando talentos a oportunidades.</p>
  </div>

  <!-- Navbar -->
  <div class="flex justify-between items-center mb-6">
    <div class="flex gap-3">
      <a href="/vaga/form" class="btn btn-primary">
        <i class="fas fa-plus mr-2"></i> <span th:text="#{btn.new.vaga}">Nova Vaga</span>
      </a>
      <a href="/chat" class="btn btn-secondary">
        <i class="fas fa-robot mr-2"></i> <span th:text="#{btn.chat}">Falar com a SkillBridge ia</span>
      </a>
      <a href="/candidatura" class="btn btn-info">
        <i class="fas fa-clipboard-list mr-2"></i> <span th:text="#{btn.candidatura}">Ir para Candidaturas</span>
      </a>
    </div>
    <div class="flex items-center gap-3">
      <img th:src="${avatar}" alt="Avatar" class="w-10 h-10 rounded-full border-2 border-blue-600">
      <span th:text="${user.attributes.name != null ? user.attributes.name : user.attributes.login}" class="font-semibold text-blue-700"></span>
      <a href="/logout" class="btn btn-error"><span th:text="#{btn.logout}">Logout</span></a>
      <details>
        <summary class="btn btn-primary">ğŸŒ</summary>
        <ul class="bg-blue-600 rounded-t-none p-2">
          <li><a href="?lang=pt_BR" class="text-white hover:bg-blue-700 px-4 py-2 block">ğŸ‡§ğŸ‡· PortuguÃªs</a></li>
          <li><a href="?lang=en_US" class="text-white hover:bg-blue-700 px-4 py-2 block">ğŸ´ English</a></li>
        </ul>
      </details>
    </div>
  </div>

  <!-- AÃ§Ãµes / Nova -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-gray-700" th:text="#{candidatura.title}">Candidaturas</h2>
    <a href="/candidatura/form" class="btn btn-success">
      <i class="fas fa-plus mr-2"></i> <span th:text="#{btn.new.candidatura}">Nova Candidatura</span>
    </a>
  </div>

  <!-- Mensagem de alerta -->
  <div th:if="${message}" role="alert" class="alert alert-success mb-6">
    <span th:text="${message}"></span>
  </div>

  <!-- Grid de candidaturas -->
  <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div th:each="c : ${candidaturas}" class="card bg-white shadow-lg rounded-2xl border border-blue-200">
      <div class="card-body p-5">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="text-lg font-bold text-blue-700" th:text="${c.nome}">Nome do Candidato</h3>
            <p class="text-sm text-gray-600" th:text="'Email: ' + ${c.email}">email@exemplo.com</p>
            <p class="text-sm text-gray-600" th:text="'Telefone: ' + ${c.telefone}">(00) 00000-0000</p>
          </div>
          <div class="text-right">
            <span class="badge badge-outline" th:text="${c.status}">PENDENTE</span>
            <p class="text-xs text-gray-400 mt-2" th:text="${c.dataAplicacao != null ? #temporals.format(c.dataAplicacao, 'dd/MM/yyyy') : ''}">01/01/2025</p>
          </div>
        </div>

        <div class="mt-4">
          <p class="text-sm font-semibold text-gray-700" th:text="#{label.vaga} + ' ' + (c.vaga != null ? c.vaga.titulo : '-')">Vaga: 1</p>
          <div class="mt-2 text-gray-600 text-sm truncate" th:text="${c.curriculo}">Resumo do currÃ­culo...</div>
        </div>
      </div>

      <div class="card-actions justify-end p-4">
        <a th:href="@{/candidatura/edit/{id}(id=${c.id})}" class="btn btn-warning btn-sm">
          <i class="fas fa-edit mr-1"></i> <span th:text="#{btn.edit}">Editar</span>
        </a>
        <form th:action="@{/candidatura/delete/{id}(id=${c.id})}" method="post" style="display:inline;">
          <button type="submit" class="btn btn-error btn-sm">
            <i class="fas fa-trash mr-1"></i> <span th:text="#{btn.delete}">Excluir</span>
          </button>
        </form>
      </div>
    </div>

    <!-- Estado vazio -->
    <div th:if="${candidaturas.empty}" class="empty-state col-span-full text-center py-16 text-gray-500">
      <i class="fas fa-clipboard-list text-5xl mb-4"></i>
      <h3 class="text-xl font-bold mb-2" th:text="#{candidatura.empty.title}">Nenhuma candidatura encontrada</h3>
      <p th:text="#{candidatura.empty.subtitle}">NÃ£o hÃ¡ candidaturas cadastradas no sistema no momento.</p>
      <a href="/candidatura/form" class="btn btn-primary mt-4">
        <i class="fas fa-plus mr-2"></i> <span th:text="#{candidatura.empty.create}">Criar Primeira Candidatura</span>
      </a>
    </div>
  </main>
</div>
</body>
</html>